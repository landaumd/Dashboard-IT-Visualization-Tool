<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>KML Click Capture Sample</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="w3_edited.css">
</head>
<body>

  <div id="over_map">
    <div class="w3-opennav w3-xlarge w3-hide-xlarge w3-right" onclick="w3_open()">&#9776;</div>
    <nav class="w3-sidenav w3-collapse w3-white w3-card-2 w3-animate-right" style="width:300px;right:0;" id="mySidenav">

      <a href="javascript:void(0)" onclick="w3_close()" class="w3-closenav w3-xlarge w3-hide-xlarge">Close &times;</a>
      <h1 style="text-align:center;font-size: 24px;">Station 4:</h1>
      <h2 style="text-align:center;font-size: 18px;">Wheel Alignment</h2>
      <p>    </p>

      <!-- Each of these "buttons" will be generated by a script that
        runs through the list of hosts and collects their info -->
      <buttonRed class="accordion">Device 5</buttonRed>
      <div class="panel">
        <!-- Here we will have the actual status, etc for each device
                <a href="#">Device 5</a> -->
        <p>Status: disconnected</p>
        <p>IP Address: 102.50.103.101</p>
        <p>Name: Arduino Uno</p>
        <img id="device" src="device_images/arduino.png" alt="Arduino"></img>
        <p>  </p>
      </div>

      <buttonRed class="accordion">Device 9</buttonRed>
      <div class="panel">
        <p>Status: paper jam</p>
        <p>IP Address: 104.58.183.103</p>
        <p>Name: HP Color Laserjet Pro</p>
        <img id="device" src="device_images/printer.png" alt="Printer"></img>
        <p>  </p>
      </div>

      <buttonYellow class="accordion">Device 8</buttonYellow>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonYellow class="accordion">Device 1</buttonYellow>
      <div class="panel">
        <p>Status: CPU at 98% capacity</p>
        <p>IP Address: 189.23.33.100</p>
        <p>Name: Dell XPS Developer</p>
        <img id="device" src="device_images/laptop.png" alt="Laptop"></img>
        <p>  </p>
      </div>

      <buttonYellow class="accordion">Device 6</buttonYellow>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 3</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 2</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 5</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 4</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 21</buttonGreen>
      <div class="panel">
        <p>Status: 12 jobs in queue</p>
        <p>IP Address: 133.13.50.987</p>
        <p>Name: Canon Maxify MB2720</p>
        <img id="device" src="device_images/multifunction_printer.jpeg" alt="Multi_printer"></img>
        <p>  </p>
      </div>

      <buttonGreen class="accordion">Device 14</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      <buttonGreen class="accordion">Device 13</buttonGreen>
      <div class="panel">
        <p>Device info can go here.</p>
      </div>

      </div>

    </nav>

    <script>
    function w3_open() {
      document.getElementById("mySidenav").style.display = "block";
    }
    function w3_close() {
      document.getElementById("mySidenav").style.display = "none";
    }
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
      acc[i].onclick = function() {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        if (panel.style.maxHeight){
          panel.style.maxHeight = null;
        } else {
          panel.style.maxHeight = panel.scrollHeight + "px";
        }
      }
    }
    </script>

  </div>


  <div id="map">
    <div id="capture"></div>
  </div>


  <script type='text/javascript' src='config.js'></script>
  <script>
  var map;
  var mainKmlSource = 'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/MBV.kml';
  var subKmlSources = [
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Assembly%20Line1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Body%20OffLoad1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Dyno1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Finish%20Line1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Paint%20Touch%20Up1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Rework1.kml',
    'https://raw.githubusercontent.com/johnsonmh/MercMadness/master/KMZ/Wheel%20Alignment1.kml'
  ];

  /**
  * Initializes the map and calls the function that loads the KML layer.
  */
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: new google.maps.LatLng(-19.257753, 146.823688),
      zoom: 2,
      mapTypeId: 'terrain',
      styles: [
        {
          featureType: "all",
          elementType: "labels",
          stylers: [
            { visibility: "off" }
          ]
        },
      ],
    });
    loadKmlLayer(mainKmlSource, map);
    for(var i = 0; i < subKmlSources.length; i++) {
      loadKmlLayer(subKmlSources[i], map);
    }

  }
  /**
  * Adds a KMLLayer based on the URL passed. Clicking on a marker
  * @param {string} src A URL for a KML file.
  */
  function loadKmlLayer(src, map) {
    var kmlLayer = new google.maps.KmlLayer(src, {
      suppressInfoWindows: true,
      preserveViewport: false,
      map: map,
    });
    google.maps.event.addListener(kmlLayer, 'click', function(event) {
      // var content = event.featureData.infoWindowHtml;
      // var testimonial = document.getElementById('capture');
      // testimonial.innerHTML = content;
      map.fitBounds(kmlLayer.getDefaultViewport());
    });
  }
  var maps_api_src = 'https://maps.googleapis.com/maps/api/js?key='+config.GOOGLE_MAPS_API_KEY+'&callback=initMap';
  document.write('\x3Cscript async defer src='+maps_api_src+'>\x3C/script>');
  </script>


</body>
</html>
